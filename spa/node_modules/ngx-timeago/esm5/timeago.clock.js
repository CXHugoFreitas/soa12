/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { of, empty, timer } from 'rxjs';
import { expand, skip } from 'rxjs/operators';
import { MINUTE, HOUR, DAY } from './util';
/**
 * @abstract
 */
import * as ɵngcc0 from '@angular/core';
var /**
 * @abstract
 */
TimeagoClock = /** @class */ (function () {
    function TimeagoClock() {
    }
    return TimeagoClock;
}());
/**
 * @abstract
 */
export { TimeagoClock };
function TimeagoClock_tsickle_Closure_declarations() {
    /**
     * @abstract
     * @param {?} then
     * @return {?}
     */
    TimeagoClock.prototype.tick = function (then) { };
}
var TimeagoDefaultClock = /** @class */ (function (_super) {
    tslib_1.__extends(TimeagoDefaultClock, _super);
    function TimeagoDefaultClock() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} then
     * @return {?}
     */
    TimeagoDefaultClock.prototype.tick = /**
     * @param {?} then
     * @return {?}
     */
    function (then) {
        return of(0)
            .pipe(expand(function () {
            var /** @type {?} */ now = Date.now();
            var /** @type {?} */ seconds = Math.round(Math.abs(now - then) / 1000);
            var /** @type {?} */ period = seconds < MINUTE
                ? 1000
                : seconds < HOUR
                    ? 1000 * MINUTE
                    : seconds < DAY
                        ? 1000 * HOUR
                        : 0;
            return period ? timer(period) : empty();
        }), skip(1));
    };
TimeagoDefaultClock.ɵfac = function TimeagoDefaultClock_Factory(t) { return ɵTimeagoDefaultClock_BaseFactory(t || TimeagoDefaultClock); };
TimeagoDefaultClock.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: TimeagoDefaultClock, factory: function (t) { return TimeagoDefaultClock.ɵfac(t); } });
var ɵTimeagoDefaultClock_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(TimeagoDefaultClock);
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(TimeagoDefaultClock, [{
        type: Injectable
    }], null, null); })();
    return TimeagoDefaultClock;
}(TimeagoClock));
export { TimeagoDefaultClock };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZWFnby5jbG9jay5qcyIsInNvdXJjZXMiOlsibmc6L25neC10aW1lYWdvL3RpbWVhZ28uY2xvY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwRCxPQUFPLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUMzQztBQUNHO0FBQWE7O0FBQWhCO0FBQVE7QUFBYTtBQUFyQjtBQUNPO0FBQThCO0FBQU0sdUJBTjNDO0FBQUUsSUFPRCxDQUFBO0FBQ0Q7QUFDRztBQUNEO0FBTEYsd0JBRUM7QUFDRDtBQUV3QztBQUFRO0FBQ3ZDO0FBQXVCO0FBQ3JCO0FBQ1Q7QUFFbUI7QUFBRTtBQUMyQixJQU5ULCtDQUFZO0FBQUM7QUFDbkI7QUFJcEI7QUFBTTtBQUFRO0FBQ1g7QUFBbUI7QUFBUSxJQUwzQyxrQ0FBSTtBQUFPO0FBQXVCO0FBQ3JCO0FBQ1QsSUFGSixVQUFLLElBQVk7QUFBSSxRQUNuQixNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNoQixhQUFPLElBQUksQ0FDSCxNQUFNLENBQUM7QUFDVCxZQUFJLHFCQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDakMsWUFBVSxxQkFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUNsRSxZQUNVLHFCQUFNLE1BQU0sR0FDVixPQUFPLEdBQUcsTUFBTTtBQUM1QixnQkFBYyxDQUFDLENBQUMsSUFBSTtBQUNwQixnQkFBYyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUk7QUFDOUIsb0JBQWdCLENBQUMsQ0FBQyxJQUFJLEdBQUcsTUFBTTtBQUMvQixvQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sR0FBRyxHQUFHO0FBQy9CLHdCQUFrQixDQUFDLENBQUMsSUFBSSxHQUFHLElBQUk7QUFDL0Isd0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEIsWUFDVSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2xELFNBQVMsQ0FBQyxFQUNGLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDUixDQUFDO0FBQ1IsS0FBRzt1REF0QkYsVUFBVTs7Ozs7MEJBQ0o7QUFBQyw4QkFWUjtBQUFFLEVBVXVDLFlBQVk7QUFDcEQsU0FEWSxtQkFBbUI7O0FBVkEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUxBLEFBT0EsQUFBQSxBQUZBLEFBRUEsQUFHQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQXRCQSxBQUFBLEFBVEEsQUFVQSxBQUFBLEFBQUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mLCBlbXB0eSwgdGltZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGV4cGFuZCwgc2tpcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IE1JTlVURSwgSE9VUiwgREFZIH0gZnJvbSAnLi91dGlsJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRpbWVhZ29DbG9jayB7XG4gIGFic3RyYWN0IHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+O1xufVxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgVGltZWFnb0RlZmF1bHRDbG9jayBleHRlbmRzIFRpbWVhZ29DbG9jayB7XG4gIHRpY2sodGhlbjogbnVtYmVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gb2YoMClcbiAgICAgIC5waXBlKFxuICAgICAgICBleHBhbmQoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGgucm91bmQoTWF0aC5hYnMobm93IC0gdGhlbikgLyAxMDAwKTtcblxuICAgICAgICAgIGNvbnN0IHBlcmlvZCA9XG4gICAgICAgICAgICBzZWNvbmRzIDwgTUlOVVRFXG4gICAgICAgICAgICAgID8gMTAwMFxuICAgICAgICAgICAgICA6IHNlY29uZHMgPCBIT1VSXG4gICAgICAgICAgICAgICAgPyAxMDAwICogTUlOVVRFXG4gICAgICAgICAgICAgICAgOiBzZWNvbmRzIDwgREFZXG4gICAgICAgICAgICAgICAgICA/IDEwMDAgKiBIT1VSXG4gICAgICAgICAgICAgICAgICA6IDA7XG5cbiAgICAgICAgICByZXR1cm4gcGVyaW9kID8gdGltZXIocGVyaW9kKSA6IGVtcHR5KCk7XG4gICAgICAgIH0pLFxuICAgICAgICBza2lwKDEpXG4gICAgICApO1xuICB9XG59XG4iXX0=